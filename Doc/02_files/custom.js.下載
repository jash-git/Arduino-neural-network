/*!
* Custom v1.0
* Contains handlers for the different site functions
*
* Copyright (c) 2013-2016 Wisteria.com
* License: GNU General Public License v2 or later
* http://www.gnu.org/licenses/gpl-2.0.html
*/(function($){var wisteria={menuInit:function(){$('ul.sf-menu').superfish({delay:1500,animation:{opacity:'show',height:'show'},speed:'fast',autoArrows:false,cssArrows:true});},searchCurtainInit:function(){var scw=$('.search-curtain-wrapper');var sc=$('.search-curtain');$('.search-control').off('click').on('click',function(e){e.preventDefault();e.stopPropagation();scw.toggleClass('show');setTimeout(function(){sc.addClass('show');$('.search-curtain .search-field').focus();},300);if(scw.hasClass('show')){$('body').addClass('has-search-curtain');}});$('.search-curtain-close').off('click').on('click',function(e){e.preventDefault();e.stopPropagation();wisteria.searchCurtainCloseInit();});},searchCurtainCloseInit:function(){var scw=$('.search-curtain-wrapper');var sc=$('.search-curtain');if(scw.hasClass('show')){$('body').removeClass('has-search-curtain');sc.addClass('hide');setTimeout(function(){sc.removeClass('show hide');scw.toggleClass('show');},300);}},responsiveMenuInit:function(){var $headerMenuClone=$('.header-menu').clone().removeAttr('class').addClass('header-menu-responsive');$headerMenuClone.removeAttr('style').find('*').each(function(i,e){$(e).removeAttr('style');});var $responsiveMenuClose=$('<div class="header-menu-responsive-close">&times;</div>');$('<div class="site-header-menu-responsive" />').insertBefore('.site-content');$headerMenuClone.appendTo('.site-header-menu-responsive');$responsiveMenuClose.appendTo('.site-header-menu-responsive');$('.site-header-menu-responsive .page_item_has_children > a, .site-header-menu-responsive .menu-item-has-children > a').append('<button class="dropdown-toggle" aria-expanded="false"/>');$('.site-header-menu-responsive .dropdown-toggle').off('click').on('click',function(e){e.preventDefault();$(this).toggleClass('toggle-on');$(this).parent().next('.children, .sub-menu').toggleClass('toggle-on');$(this).attr('aria-expanded',$(this).attr('aria-expanded')==='false'?'true':'false');});},slidePanelInit:function(){var menuResponsive=$('.site-header-menu-responsive');var overlayEffect=$('.overlay-effect');var menuResponsiveClose=$('.header-menu-responsive-close');$('.toggle-menu-control').off('click').on('click',function(e){e.preventDefault();e.stopPropagation();menuResponsive.toggleClass('show');overlayEffect.toggleClass('open');if(overlayEffect.hasClass('open')){$('body').addClass('has-responsive-menu');}});menuResponsiveClose.off('click').on('click',function(){wisteria.slidePanelCloseInit();});overlayEffect.off('click').on('click',function(){wisteria.slidePanelCloseInit();});},slidePanelCloseInit:function(){var menuResponsive=$('.site-header-menu-responsive');var overlayEffect=$('.overlay-effect');if(overlayEffect.hasClass('open')){$('body').removeClass('has-responsive-menu');if(menuResponsive.hasClass('show')){menuResponsive.toggleClass('show');}
overlayEffect.toggleClass('open');}},widgetLogicInit:function(){$('.widget_nav_menu > div[class^="menu-social-"] > ul > li > a').wrapInner('<span class="screen-reader-text"></span>');$('.widget_nav_menu .menu-item-has-children > a').append('<span class="custom-menu-toggle" aria-expanded="false"></span>');$('.widget_nav_menu .custom-menu-toggle').off('click').on('click',function(e){e.preventDefault();$(this).toggleClass('toggle-on');$(this).parent().next('.sub-menu').toggleClass('toggle-on');$(this).attr('aria-expanded',$(this).attr('aria-expanded')==='false'?'true':'false');});$('.widget_pages .page_item_has_children > a').append('<span class="page-toggle" aria-expanded="false"></span>');$('.widget_pages .page-toggle').off('click').on('click',function(e){e.preventDefault();$(this).toggleClass('toggle-on');$(this).parent().next('.children').toggleClass('toggle-on');$(this).attr('aria-expanded',$(this).attr('aria-expanded')==='false'?'true':'false');});$('.widget_categories').find('.children').parent().addClass('category_item_has_children');$('.widget_categories .category_item_has_children > a').append('<span class="category-toggle" aria-expanded="false"></span>');$('.widget_categories .category-toggle').off('click').on('click',function(e){e.preventDefault();$(this).toggleClass('toggle-on');$(this).parent().next('.children').toggleClass('toggle-on');$(this).attr('aria-expanded',$(this).attr('aria-expanded')==='false'?'true':'false');});},mqInit:function(){enquire.register('screen and ( max-width: 767px )',{deferSetup:true,setup:function(){wisteria.responsiveMenuInit();},match:function(){wisteria.slidePanelInit();$('.entry-content, .sidebar, .footer-sidebar').find('table').wrap('<div class="table-responsive"></div>');},unmatch:function(){wisteria.slidePanelCloseInit();$('.entry-content, .sidebar, .footer-sidebar').find('table').unwrap('<div class="table-responsive"></div>');}});}};$(document).ready(function(){wisteria.menuInit();wisteria.searchCurtainInit();wisteria.slidePanelInit();wisteria.widgetLogicInit();wisteria.mqInit();});$(document).keyup(function(e){if(e.keyCode===27){wisteria.searchCurtainCloseInit();wisteria.slidePanelCloseInit();}});})(jQuery);